<a id="link-chapter4"></a>

# 第四章：地址空间

* [引言](0intro.md)
  * [本章导读](0intro.md#id2)
  * [实践体验](0intro.md#id4)
  * [本章代码树](0intro.md#id5)
  * [本章代码导读](0intro.md#id6)
* [Rust 中的动态内存分配](1rust-dynamic-allocation.md)
  * [本节导读](1rust-dynamic-allocation.md#id1)
  * [静态与动态内存分配](1rust-dynamic-allocation.md#id2)
    * [静态分配](1rust-dynamic-allocation.md#id3)
    * [动态分配](1rust-dynamic-allocation.md#id4)
  * [Rust 中的堆数据结构](1rust-dynamic-allocation.md#rust-heap-data-structures)
  * [在内核中支持动态内存分配](1rust-dynamic-allocation.md#term-raii)
* [地址空间](2address-space.md)
  * [本节导读](2address-space.md#id2)
  * [虚拟地址与地址空间](2address-space.md#id3)
    * [地址虚拟化出现之前](2address-space.md#id4)
    * [加一层抽象加强内存管理](2address-space.md#id5)
    * [增加硬件加速虚实地址转换](2address-space.md#id6)
  * [分段内存管理](2address-space.md#id7)
  * [分页内存管理](2address-space.md#id8)
* [SV39 多级页表的硬件机制](3sv39-implementation-1.md)
  * [本节导读](3sv39-implementation-1.md#id1)
  * [虚拟地址和物理地址](3sv39-implementation-1.md#id2)
    * [内存控制相关的CSR寄存器](3sv39-implementation-1.md#csr)
    * [地址格式与组成](3sv39-implementation-1.md#id3)
    * [地址相关的数据结构抽象与类型定义](3sv39-implementation-1.md#id4)
  * [页表项的数据结构抽象与类型定义](3sv39-implementation-1.md#id5)
  * [多级页表](3sv39-implementation-1.md#id6)
  * [SV39 地址转换过程](3sv39-implementation-1.md#id7)
    * [快表（TLB）](3sv39-implementation-1.md#tlb)
* [管理 SV39 多级页表](4sv39-implementation-2.md)
  * [本节导读](4sv39-implementation-2.md#id1)
  * [物理页帧管理](4sv39-implementation-2.md#term-manage-phys-frame)
    * [可用物理页的分配与回收](4sv39-implementation-2.md#id3)
    * [分配/回收物理页帧的接口](4sv39-implementation-2.md#id4)
  * [多级页表管理](4sv39-implementation-2.md#id5)
    * [页表基本数据结构与访问接口](4sv39-implementation-2.md#id6)
    * [内核中访问物理页帧的方法](4sv39-implementation-2.md#id7)
    * [建立和拆除虚实地址映射关系](4sv39-implementation-2.md#term-create-pagetable)
* [内核与应用的地址空间](5kernel-app-spaces.md)
  * [本节导读](5kernel-app-spaces.md#id2)
  * [实现地址空间抽象](5kernel-app-spaces.md#id3)
    * [逻辑段：一段连续地址的虚拟内存](5kernel-app-spaces.md#term-vm-map-area)
    * [地址空间：一系列有关联的逻辑段](5kernel-app-spaces.md#term-vm-memory-set)
  * [内核地址空间](5kernel-app-spaces.md#id6)
  * [应用地址空间](5kernel-app-spaces.md#term-vm-app-addr-space)
* [基于地址空间的分时多任务](6multitasking-based-on-as.md)
  * [本节导读](6multitasking-based-on-as.md#id2)
  * [建立并开启基于分页模式的虚拟地址空间](6multitasking-based-on-as.md#id4)
    * [创建内核地址空间](6multitasking-based-on-as.md#id5)
    * [检查内核地址空间的多级页表设置](6multitasking-based-on-as.md#id6)
  * [跳板机制的实现](6multitasking-based-on-as.md#term-trampoline)
    * [扩展Trap 上下文](6multitasking-based-on-as.md#trap)
    * [切换地址空间](6multitasking-based-on-as.md#id8)
    * [建立跳板页面](6multitasking-based-on-as.md#id9)
  * [加载和执行应用程序](6multitasking-based-on-as.md#id10)
    * [扩展任务控制块](6multitasking-based-on-as.md#id11)
    * [更新对任务控制块的管理](6multitasking-based-on-as.md#id12)
  * [改进 Trap 处理的实现](6multitasking-based-on-as.md#id13)
  * [改进 sys_write 的实现](6multitasking-based-on-as.md#sys-write)
  * [小结](6multitasking-based-on-as.md#id14)
* [超越物理内存的地址空间](7more-as.md)
  * [本节导读](7more-as.md#id2)
    * [有限的物理内存](7more-as.md#id3)
    * [超越物理内存的方法](7more-as.md#id4)
  * [分时复用内存](7more-as.md#id5)
    * [动态内存分配](7more-as.md#id6)
      * [最先匹配（first fit）策略](7more-as.md#first-fit)
      * [最优匹配（best fit）策略](7more-as.md#best-fit)
      * [最差匹配（worst fit）策略](7more-as.md#worst-fit)
      * [减少碎片](7more-as.md#id7)
    * [覆盖（Overlay）技术](7more-as.md#overlay)
  * [内存交换](7more-as.md#id8)
    * [交换技术](7more-as.md#id9)
    * [虚拟内存技术](7more-as.md#id10)
    * [页面置换机制](7more-as.md#id11)
      * [作为交换区的存储设备](7more-as.md#id12)
      * [页表项（Page Table Entry）](7more-as.md#page-table-entry)
      * [内存访问异常处理](7more-as.md#id13)
    * [页面置换策略](7more-as.md#id14)
      * [内存层次结构与局部性原理](7more-as.md#id15)
      * [评价指标](7more-as.md#id16)
      * [策略范畴](7more-as.md#id17)
      * [最优置换策略](7more-as.md#id18)
      * [FIFO置换策略](7more-as.md#fifo)
      * [LRU置换策略](7more-as.md#lru)
      * [Clock置换策略](7more-as.md#clock)
      * [工作集置换策略](7more-as.md#id19)
      * [缺页率置换策略](7more-as.md#id20)
    * [Belady异常现象](7more-as.md#belady)
  * [小结](7more-as.md#id21)
* [练习](8exercise.md)
  * [课后练习](8exercise.md#id2)
    * [编程题](8exercise.md#id3)
    * [问答题](8exercise.md#id4)
  * [实验练习](8exercise.md#id5)
    * [实践作业](8exercise.md#id6)
      * [重写 sys_get_time](8exercise.md#sys-get-time)
      * [mmap 和 munmap 匿名映射](8exercise.md#mmap-munmap)
      * [实验要求](8exercise.md#id7)
    * [问答作业](8exercise.md#id8)
    * [实验练习的提交报告要求](8exercise.md#id9)
* [练习参考答案](9answer.md)
  * [课后练习](9answer.md#id2)
    * [编程题](9answer.md#id3)
    * [问答题](9answer.md#id4)
  * [实验练习](9answer.md#id5)
    * [实践作业](9answer.md#id6)
      * [重写 sys_get_time](9answer.md#sys-get-time)
      * [mmap 和 munmap 匿名映射](9answer.md#mmap-munmap)
      * [实验要求](9answer.md#id7)
    * [问答作业](9answer.md#id8)
    * [实验练习的提交报告要求](9answer.md#id9)

<!-- chyyuu 添加扩展阅读 虚拟内存超越物理内存，通过换页机制??? -->
